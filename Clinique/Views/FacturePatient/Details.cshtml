@using AspNetCoreTemplate.Models.VIEWS
@using Microsoft.AspNetCore.Mvc.TagHelpers
@using System.Globalization
@model AspNetCoreTemplate.Models.FacturePatient

@{
    ViewData["Title"] = "Details";
    Layout = "~/Views/Employer/template/_Content.cshtml";
    IEnumerable<VFactureActe> factureDetails = ViewBag.factureDetails;
}

<h1>Details</h1>

<a asp-controller="Employer" asp-action="AfficheFacture" asp-route-id="@Model.Id" class="btn btn-danger">AFFICHER PDF</a>
<a asp-controller="Employer" asp-action="PdfFacture" asp-route-id="@Model.Id" class="btn btn-danger">Dowload PDF</a>

<div>
    <h4>FacturePatient</h4>
    <hr />
    <dl class="row">
        <dt class = "col-sm-2">
            @Html.DisplayNameFor(model => model.Date)
        </dt>
        <dd class="col-sm-10">
            @Model.Date.ToString("dd MMMM yyyy")
            @* @Html.DisplayFor(model => model.Date) *@
        </dd>
        <dt class = "col-sm-2">
            @Html.DisplayNameFor(model => model.Patient)
        </dt>
        <dd class = "col-sm-10">
            @Html.DisplayFor(model => model.Patient.Nom)
        </dd>
    </dl>
</div>

<hr/>
<hr/>

<div class="card top-selling overflow-auto">
  
    <div class="card-body pb-0">
        <h5 class="card-title">Details Facture</h5>

        <table class="table table-borderless">
            <thead>
            <tr>
                <th scope="col">Facture Date</th>
                <th scope="col">Patient</th>
                <th scope="col">Type Acte</th>
                <th scope="col">Montant</th>
            </tr>
            </thead>
            <tbody>
            @foreach (var q in factureDetails)
            {
                <tr>
                    @* <th scope="row"><a href="#"><img src="assets/img/product-1.jpg" alt=""></a></th> *@
                    @* <td>$64</td> *@
                    <td class="fw-bold">@q.FacturePatient.Date.ToString("dd MMMM yyyy")</td>
                    <td class="fw-bold">@q.Patient.Nom</td>
                    <td><a href="#" class="text-primary fw-bold">@q.TypeActe.Nom</a></td>
                    <td><a href="#" class="text-primary fw-bold">@q.Montant.ToString("N2", CultureInfo.GetCultureInfo("fr-FR"))</a></td>
                </tr>
            }
            <tr><th></th><th></th><th></th><th>@ViewBag.sommeFacture.ToString("N2", CultureInfo.GetCultureInfo("fr-FR"))</th></tr>
            </tbody>
        </table>

    </div>

</div>

<div>
    <a asp-action="Edit" asp-route-id="@Model?.Id">Edit</a> |
    <a asp-action="Index">Back to List</a>
</div>
